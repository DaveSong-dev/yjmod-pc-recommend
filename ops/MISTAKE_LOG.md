# 실수/재발 방지 로그

이 문서는 운영 중 발생한 실수와 재발 방지 규칙을 기록합니다.

## 2026-02-27

### 1) 반영 완료를 너무 이르게 선언
- **증상**: GitHub Actions 성공 전/배포 최종 확인 전 "반영 완료"로 안내됨.
- **원인**: `run started` 상태를 `service reflected`와 혼동.
- **재발 방지**:
  - `queued/in_progress`는 절대 완료로 안내하지 않는다.
  - 아래 3가지가 모두 충족될 때만 완료 선언:
    1. Actions run `completed/success`
    2. 원격 `master`에 기대 커밋 존재 확인
    3. 라이브 URL에서 반영 문자열(또는 기능 시나리오) 확인

### 2) 라이브 캐시/정적 응답 확인 부족
- **증상**: 코드상 반영됐는데 라이브 페이지가 이전 버전으로 보임.
- **원인**: 캐시 우회 검증과 번들 내 문자열 검증을 충분히 병행하지 않음.
- **재발 방지**:
  - `?v=<timestamp>` 쿼리로 우회 조회
  - `build/app.bundle.js`에 기대 문자열 존재 여부 확인
  - 필요 시 `deploy_vercel.ps1`로 수동 프로덕션 배포 수행

### 3) 기능 오너십 혼선(같은 파일 중복 수정 위험)
- **증상**: 멀티 에이전트 작업 시 동일 파일 충돌 가능성 증가.
- **원인**: 역할 분리는 했지만 최종 통합 시 책임 범위가 흔들림.
- **재발 방지**:
  - 파일 오너십을 명시하고 강제:
    - `js/filter.js` = A 전담
    - `js/wizard.js` = B 전담
    - C는 제안만, D는 검증만
  - 통합자는 오너십 기준 위반 시 반드시 재분배 후 병합
